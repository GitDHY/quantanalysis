{
    "è¶‹åŠ¿è·Ÿè¸ª1": {
        "name": "è¶‹åŠ¿è·Ÿè¸ª1",
        "code": "\"\"\"\nè¶‹åŠ¿è·Ÿè¸ªç­–ç•¥ (Trend Following)\nåªæŒæœ‰å¤„äºä¸Šå‡è¶‹åŠ¿çš„èµ„äº§ï¼ˆä»·æ ¼åœ¨å‡çº¿ä¸Šæ–¹ï¼‰ã€‚\n\"\"\"\n\ndef strategy():\n    weights = ctx.get_current_weights()\n    \n    # ç­–ç•¥å‚æ•°\n    ma_period = 200     # é•¿æœŸå‡çº¿\n    trend_ma = 50       # è¶‹åŠ¿ç¡®è®¤å‡çº¿\n    \n    total_weight = 100\n    trending_assets = []\n    \n    # è¯†åˆ«è¶‹åŠ¿èµ„äº§\n    for ticker in ctx.tickers:\n        if ctx.price_above_ma(ticker, ma_period):\n            trending_assets.append(ticker)\n    \n    ctx.log(f\"ğŸ“Š è¶‹åŠ¿å‘ä¸Šçš„èµ„äº§: {trending_assets}\")\n    \n    if not trending_assets:\n        # æ²¡æœ‰è¶‹åŠ¿èµ„äº§ï¼Œä¿å®ˆé…ç½®\n        ctx.log(\"âš ï¸ æ— è¶‹åŠ¿èµ„äº§ï¼Œä¿æŒç°æœ‰é…ç½®\")\n        return\n    \n    # å¹³å‡åˆ†é…æƒé‡ç»™è¶‹åŠ¿èµ„äº§\n    weight_per_asset = total_weight / len(trending_assets)\n    \n    for ticker in ctx.tickers:\n        if ticker in trending_assets:\n            # è¶‹åŠ¿èµ„äº§: åˆ†é…æƒé‡\n            old_weight = weights.get(ticker, 0)\n            weights[ticker] = weight_per_asset\n            if weights[ticker] > old_weight:\n                ctx.log(f\"ğŸŸ¢ {ticker} è¶‹åŠ¿å‘ä¸Šï¼Œå¢ä»“è‡³ {weight_per_asset:.1f}%\")\n        else:\n            # éè¶‹åŠ¿èµ„äº§: æ¸…ä»“\n            if weights.get(ticker, 0) > 0:\n                ctx.log(f\"ğŸ”´ {ticker} è¶‹åŠ¿è½¬å¼±ï¼Œæ¸…ä»“\")\n            weights[ticker] = 0\n    \n    ctx.set_target_weights(weights)\n",
        "description": "",
        "portfolio_name": "Current",
        "created_at": "2026-02-06T17:05:25.837587",
        "updated_at": "2026-02-06T17:05:25.837592"
    },
    "é£é™©å¹³ä»·1": {
        "name": "é£é™©å¹³ä»·1",
        "code": "\"\"\"\né£é™©å¹³ä»·ç­–ç•¥ (Simplified Risk Parity)\næ ¹æ®æ³¢åŠ¨ç‡åæ¯”è°ƒæ•´ä»“ä½ï¼Œä½æ³¢åŠ¨èµ„äº§é…ç½®æ›´å¤šã€‚\n\"\"\"\n\ndef strategy():\n    weights = ctx.get_current_weights()\n    \n    # ç­–ç•¥å‚æ•°\n    vol_period = 20     # æ³¢åŠ¨ç‡è®¡ç®—å‘¨æœŸ\n    target_vol = 0.15   # ç›®æ ‡æ³¢åŠ¨ç‡ 15%\n    \n    volatilities = {}\n    \n    # è®¡ç®—å„èµ„äº§æ³¢åŠ¨ç‡\n    for ticker in ctx.tickers:\n        vol = ctx.volatility(ticker, vol_period, annualize=True)\n        if not vol.empty and vol.iloc[-1] > 0:\n            volatilities[ticker] = vol.iloc[-1]\n    \n    if not volatilities:\n        ctx.log(\"âš ï¸ æ— æ³•è®¡ç®—æ³¢åŠ¨ç‡\")\n        return\n    \n    # è®¡ç®—åæ³¢åŠ¨ç‡æƒé‡\n    inv_vol = {t: 1/v for t, v in volatilities.items()}\n    total_inv_vol = sum(inv_vol.values())\n    \n    # å½’ä¸€åŒ–æƒé‡\n    for ticker in ctx.tickers:\n        if ticker in inv_vol:\n            weights[ticker] = (inv_vol[ticker] / total_inv_vol) * 100\n            ctx.log(f\"ğŸ“Š {ticker}: æ³¢åŠ¨ç‡={volatilities[ticker]:.1%}, æƒé‡={weights[ticker]:.1f}%\")\n        else:\n            weights[ticker] = 0\n    \n    ctx.set_target_weights(weights)\n",
        "description": "",
        "portfolio_name": "Current",
        "created_at": "2026-02-06T17:12:22.365761",
        "updated_at": "2026-02-06T17:12:22.365786"
    },
    "RSIå‡å€¼å›å½’1": {
        "name": "RSIå‡å€¼å›å½’1",
        "code": "\"\"\"\nRSI å‡å€¼å›å½’ç­–ç•¥ (Mean Reversion)\nRSI è¶…ä¹°/è¶…å–æ—¶åå‘æ“ä½œã€‚\n\"\"\"\n\ndef strategy():\n    weights = ctx.get_current_weights()\n    \n    # ç­–ç•¥å‚æ•°\n    rsi_period = 14\n    oversold = 30       # è¶…å–é˜ˆå€¼\n    overbought = 70     # è¶…ä¹°é˜ˆå€¼\n    \n    for ticker in ctx.tickers:\n        current_weight = weights.get(ticker, 0)\n        \n        # è®¡ç®— RSI\n        rsi = ctx.rsi(ticker, rsi_period)\n        if rsi.empty:\n            continue\n        \n        current_rsi = rsi.iloc[-1]\n        \n        # è¶…å–: ä¹°å…¥ä¿¡å·\n        if current_rsi < oversold:\n            weights[ticker] = min(current_weight + 10, 50)\n            ctx.log(f\"ğŸŸ¢ {ticker} RSI={current_rsi:.0f} è¶…å–ï¼Œå¢ä»“\")\n        \n        # è¶…ä¹°: å–å‡ºä¿¡å·\n        elif current_rsi > overbought:\n            weights[ticker] = max(current_weight - 10, 5)\n            ctx.log(f\"ğŸ”´ {ticker} RSI={current_rsi:.0f} è¶…ä¹°ï¼Œå‡ä»“\")\n    \n    ctx.set_target_weights(weights)\n",
        "description": "",
        "portfolio_name": "Current",
        "created_at": "2026-02-06T17:13:16.257854",
        "updated_at": "2026-02-06T17:13:16.257859"
    },
    "åŠ¨é‡ç­–ç•¥1": {
        "name": "åŠ¨é‡ç­–ç•¥1",
        "code": "\"\"\"\nåŠ¨é‡ç­–ç•¥ (Momentum Strategy)\næ ¹æ®è¿‡å»ä¸€æ®µæ—¶é—´çš„æ¶¨å¹…è°ƒæ•´ä»“ä½ï¼Œè¿½æ¶¨æ€è·Œã€‚\n\"\"\"\n\ndef strategy():\n    weights = ctx.get_current_weights()\n    \n    # ç­–ç•¥å‚æ•°\n    lookback = 20       # åŠ¨é‡è®¡ç®—å‘¨æœŸ\n    threshold = 5       # åŠ¨é‡é˜ˆå€¼ (%)\n    \n    for ticker in ctx.tickers:\n        current_weight = weights.get(ticker, 0)\n        \n        # è®¡ç®—åŠ¨é‡\n        mom = ctx.momentum(ticker, lookback)\n        if mom.empty:\n            continue\n        \n        current_momentum = mom.iloc[-1]\n        \n        # æ­£å‘åŠ¨é‡: å¢åŠ ä»“ä½\n        if current_momentum > threshold:\n            weights[ticker] = min(current_weight + 5, 40)\n            ctx.log(f\"ğŸ“ˆ {ticker} åŠ¨é‡ {current_momentum:.1f}% > {threshold}%, å¢ä»“\")\n        \n        # è´Ÿå‘åŠ¨é‡: å‡å°‘ä»“ä½\n        elif current_momentum < -threshold:\n            weights[ticker] = max(current_weight - 5, 0)\n            ctx.log(f\"ğŸ“‰ {ticker} åŠ¨é‡ {current_momentum:.1f}% < -{threshold}%, å‡ä»“\")\n    \n    ctx.set_target_weights(weights)\n",
        "description": "",
        "portfolio_name": "Current",
        "created_at": "2026-02-06T17:14:38.891411",
        "updated_at": "2026-02-06T17:14:38.891416"
    },
    "VIXæ³¢åŠ¨ç‡1": {
        "name": "VIXæ³¢åŠ¨ç‡1",
        "code": "\"\"\"\nVIX æ³¢åŠ¨ç‡ç­–ç•¥ (Volatility Strategy)\næ ¹æ® VIX æŒ‡æ•°è°ƒæ•´é£é™©èµ„äº§ä»“ä½ã€‚\n\"\"\"\n\ndef strategy():\n    weights = ctx.get_current_weights()\n    \n    # ç­–ç•¥å‚æ•°\n    vix_low = 15        # ä½æ³¢åŠ¨é˜ˆå€¼\n    vix_high = 25       # é«˜æ³¢åŠ¨é˜ˆå€¼\n    vix_panic = 35      # ææ…Œé˜ˆå€¼\n    \n    # è·å–å½“å‰ VIX\n    current_vix = ctx.current_vix()\n    ctx.log(f\"ğŸ“Š å½“å‰ VIX: {current_vix:.1f}\")\n    \n    # å®šä¹‰é£é™©èµ„äº§å’Œé¿é™©èµ„äº§\n    risk_assets = ['IWY', 'LVHI', 'G3B.SI']  # æ ¹æ®ä½ çš„ç»„åˆè°ƒæ•´\n    safe_assets = ['GSD.SI', 'MBH.SI']       # é»„é‡‘ã€å€ºåˆ¸ç­‰\n    \n    if current_vix < vix_low:\n        # ä½æ³¢åŠ¨: æ¿€è¿›é…ç½®\n        ctx.log(\"ğŸš€ ä½æ³¢åŠ¨ç¯å¢ƒï¼Œå¢åŠ é£é™©èµ„äº§\")\n        for ticker in risk_assets:\n            if ticker in weights:\n                weights[ticker] = weights.get(ticker, 0) * 1.2\n        for ticker in safe_assets:\n            if ticker in weights:\n                weights[ticker] = weights.get(ticker, 0) * 0.8\n    \n    elif current_vix > vix_panic:\n        # ææ…Œ: é¿é™©é…ç½®\n        ctx.log(\"ğŸ›¡ï¸ ææ…Œç¯å¢ƒï¼Œå¤§å¹…å‡å°‘é£é™©èµ„äº§\")\n        for ticker in risk_assets:\n            if ticker in weights:\n                weights[ticker] = weights.get(ticker, 0) * 0.5\n        for ticker in safe_assets:\n            if ticker in weights:\n                weights[ticker] = weights.get(ticker, 0) * 1.5\n    \n    elif current_vix > vix_high:\n        # é«˜æ³¢åŠ¨: è°¨æ…é…ç½®\n        ctx.log(\"âš ï¸ é«˜æ³¢åŠ¨ç¯å¢ƒï¼Œé€‚åº¦å‡å°‘é£é™©èµ„äº§\")\n        for ticker in risk_assets:\n            if ticker in weights:\n                weights[ticker] = weights.get(ticker, 0) * 0.85\n    \n    ctx.set_target_weights(weights)\n",
        "description": "",
        "portfolio_name": "Current",
        "created_at": "2026-02-06T17:15:37.643974",
        "updated_at": "2026-02-06T17:15:37.643978"
    },
    "å‡çº¿äº¤å‰1": {
        "name": "å‡çº¿äº¤å‰1",
        "code": "\"\"\"\nå‡çº¿äº¤å‰ç­–ç•¥ (Moving Average Crossover)\nå½“çŸ­æœŸå‡çº¿ä¸Šç©¿é•¿æœŸå‡çº¿æ—¶å¢åŠ ä»“ä½ï¼Œä¸‹ç©¿æ—¶å‡å°‘ä»“ä½ã€‚\n\"\"\"\n\ndef strategy():\n    # è·å–å½“å‰æƒé‡\n    weights = ctx.get_current_weights()\n    \n    # ç­–ç•¥å‚æ•°\n    short_period = 20   # çŸ­æœŸå‡çº¿å‘¨æœŸ\n    long_period = 50    # é•¿æœŸå‡çº¿å‘¨æœŸ\n    \n    # éå†æ‰€æœ‰æ ‡çš„\n    for ticker in ctx.tickers:\n        current_weight = weights.get(ticker, 0)\n        \n        # è®¡ç®—å‡çº¿\n        short_ma = ctx.ma(ticker, short_period)\n        long_ma = ctx.ma(ticker, long_period)\n        \n        if len(short_ma) < 2 or len(long_ma) < 2:\n            continue\n        \n        # é‡‘å‰: å¢åŠ ä»“ä½\n        if ctx.ma_cross_up(ticker, short_period, long_period):\n            weights[ticker] = min(current_weight + 10, 50)\n            ctx.log(f\"ğŸŸ¢ {ticker} é‡‘å‰ä¿¡å·, å¢åŠ ä»“ä½\")\n        \n        # æ­»å‰: å‡å°‘ä»“ä½\n        elif ctx.ma_cross_down(ticker, short_period, long_period):\n            weights[ticker] = max(current_weight - 10, 0)\n            ctx.log(f\"ğŸ”´ {ticker} æ­»å‰ä¿¡å·, å‡å°‘ä»“ä½\")\n    \n    # è®¾ç½®ç›®æ ‡æƒé‡\n    ctx.set_target_weights(weights)\n",
        "description": "",
        "portfolio_name": "Current",
        "created_at": "2026-02-06T17:16:18.466521",
        "updated_at": "2026-02-06T17:16:18.466525"
    },
    "test2": {
        "name": "test2",
        "code": "\"\"\"\né•¿æœŸå¢å¼ºåŠ¨é‡ç­–ç•¥ (Enhanced Momentum Strategy)\nç»“åˆä¸­é•¿æœŸåŠ¨é‡ä¸å¤§ç›˜è¶‹åŠ¿è¿‡æ»¤ï¼Œåœ¨åŸºç¡€ä»“ä½ä¸ŠåšåŠ¨æ€å¢å¼ºã€‚\n\"\"\"\n\ndef strategy():\n    weights = ctx.get_current_weights()\n    \n    # ======================\n    # ç­–ç•¥å‚æ•°\n    # ======================\n    lookback_short = 60      # ä¸­æœŸåŠ¨é‡å‘¨æœŸ\n    lookback_long = 120      # é•¿æœŸåŠ¨é‡å‘¨æœŸ\n    market_ma = 200          # å¤§ç›˜å‡çº¿å‘¨æœŸ\n    adjust_step = 10         # å•æ¬¡è°ƒä»“å¹…åº¦ (%)\n    max_weight = 50          # å•èµ„äº§æœ€å¤§æƒé‡\n    min_weight = 0           # å•èµ„äº§æœ€å°æƒé‡\n    \n    # ======================\n    # å¤§ç›˜è¶‹åŠ¿åˆ¤æ–­ (ä»¥ SPY ä¸ºä¾‹)\n    # ======================\n    # ä¿®æ­£ï¼šä½¿ç”¨ current_price() æ–¹æ³•è·å–å½“å‰ä»·æ ¼\n    market_price = ctx.current_price(\"SPY\")\n    # ä¿®æ­£ï¼šma() è¿”å› Seriesï¼Œéœ€è¦å–æœ€æ–°å€¼\n    market_ma_series = ctx.ma(\"SPY\", market_ma)\n    \n    market_bull = False\n    if market_price and not market_ma_series.empty:\n        market_ma_value = market_ma_series.iloc[-1]\n        market_bull = market_price > market_ma_value\n    \n    # ======================\n    # éå†èµ„äº§\n    # ======================\n    for ticker in ctx.tickers:\n        \n        current_weight = weights.get(ticker, 0)\n        \n        # è®¡ç®—åŒå‘¨æœŸåŠ¨é‡\n        mom_short = ctx.momentum(ticker, lookback_short)\n        mom_long = ctx.momentum(ticker, lookback_long)\n        \n        if mom_short.empty or mom_long.empty:\n            continue\n        \n        current_mom_short = mom_short.iloc[-1]\n        current_mom_long = mom_long.iloc[-1]\n        \n        # ======================\n        # ç‰›å¸‚ + åŒåŠ¨é‡ä¸ºæ­£ â†’ å¢ä»“\n        # ======================\n        if market_bull and current_mom_short > 0 and current_mom_long > 0:\n            \n            weights[ticker] = min(current_weight + adjust_step, max_weight)\n            \n            ctx.log(\n                f\"ğŸ“ˆ {ticker} åŒåŠ¨é‡ä¸ºæ­£ ({current_mom_short:.1f}%, \"\n                f\"{current_mom_long:.1f}%), ç‰›å¸‚å¢å¼º\"\n            )\n        \n        # ======================\n        # ç†Šå¸‚ æˆ– åŒåŠ¨é‡ä¸ºè´Ÿ â†’ å‡ä»“\n        # ======================\n        elif (not market_bull) or (current_mom_short < 0 and current_mom_long < 0):\n            \n            weights[ticker] = max(current_weight - adjust_step, min_weight)\n            \n            ctx.log(\n                f\"ğŸ“‰ {ticker} è¶‹åŠ¿è½¬å¼± ({current_mom_short:.1f}%, \"\n                f\"{current_mom_long:.1f}%), é™ä»“é˜²å®ˆ\"\n            )\n    \n    # ======================\n    # æƒé‡å½’ä¸€åŒ–\n    # ======================\n    total_weight = sum(weights.values())\n    if total_weight > 0:\n        for ticker in weights:\n            weights[ticker] = weights[ticker] / total_weight * 100\n    \n    ctx.set_target_weights(weights)\n",
        "description": "",
        "portfolio_name": "op6",
        "created_at": "2026-02-11T16:06:38.154861",
        "updated_at": "2026-02-11T16:06:38.154867"
    }
}